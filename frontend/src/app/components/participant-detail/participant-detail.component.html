<div class="container">
  <div class="card">
    <div class="card-header">
      <h2>Osavõtja info</h2>
    </div>
    <div class="card-body">
      <form [formGroup]="participantForm" (ngSubmit)="onSubmit()">
        <div class="mb-2 offset-md-3">
          <div class="form-check form-check-inline radio-buttons">
            <input
              class="form-check-input"
              type="radio"
              formControlName="type"
              value="PERSON"
              id="personType"
            />
            <label class="form-check-label" for="personType">Eraisik</label>
          </div>
          <div class="form-check form-check-inline radio-buttons">
            <input
              class="form-check-input"
              type="radio"
              formControlName="type"
              value="COMPANY"
              id="companyType"
            />
            <label class="form-check-label" for="companyType">Ettevõte</label>
          </div>
        </div>

        <div *ngIf="participantForm.get('type')?.value === 'PERSON'" class="mb-0">
          <div class="form-row">
            <label for="firstName">Eesnimi:</label>
            <input
              id="firstName"
              formControlName="firstName"
              [class.is-invalid]="participantForm.get('firstName')?.invalid && participantForm.get('firstName')?.touched"
            />
            <div class="error-msg"
                 *ngIf="participantForm.get('firstName')?.invalid && participantForm.get('firstName')?.touched">
              Eesnimi on kohustuslik
            </div>
          </div>

          <div class="form-row">
            <label for="lastName">Perenimi:</label>
            <input
              id="lastName"
              formControlName="lastName"
              [class.is-invalid]="participantForm.get('lastName')?.invalid && participantForm.get('lastName')?.touched"
            />
            <div class="error-msg"
                 *ngIf="participantForm.get('lastName')?.invalid && participantForm.get('lastName')?.touched">
              Perekonnanimi on kohustuslik
            </div>
          </div>
          <div class="form-row">
            <label for="personalCode">Isikukood:</label>
            <input
              id="personalCode"
              formControlName="personalCode"
              [class.is-invalid]="participantForm.get('personalCode')?.invalid && participantForm.get('personalCode')?.touched"
            />
            <div class="error-msg"
                 *ngIf="participantForm.get('personalCode')?.invalid && participantForm.get('personalCode')?.touched">
              Isikukood on kohustuslik
            </div>
          </div>
        </div>

        <div *ngIf="participantForm.get('type')?.value === 'COMPANY'">
          <div class="form-row">
            <label for="companyName">Ettevõtte nimi:</label>
            <input
              id="companyName"
              formControlName="companyName"
              [class.is-invalid]="participantForm.get('companyName')?.invalid && participantForm.get('companyName')?.touched"
            />
            <div
              class="error-msg"
              *ngIf="participantForm.get('companyName')?.invalid && participantForm.get('companyName')?.touched"
            >
              Ettevõtte nimi on kohustuslik
            </div>
          </div>

          <div class="form-row">
            <label for="registrationCode">Registrikood:</label>
            <input
              id="registrationCode"
              formControlName="registrationCode"
              [class.is-invalid]="participantForm.get('registrationCode')?.invalid && participantForm.get('registrationCode')?.touched"
            />
            <div
              class="error-msg"
              *ngIf="participantForm.get('registrationCode')?.invalid && participantForm.get('registrationCode')?.touched"
            >
              Registrikood on kohustuslik
            </div>
          </div>

          <div class="form-row">
            <label for="participantCount">Osalejate arv:</label>
            <input
              type="number"
              id="participantCount"
              formControlName="participantCount"
              [class.is-invalid]="participantForm.get('participantCount')?.invalid && participantForm.get('participantCount')?.touched"
            />
            <div
              class="error-msg"
              *ngIf="participantForm.get('participantCount')?.invalid && participantForm.get('participantCount')?.touched"
            >
              Osalejate arv on kohustuslik ja peab olema positiivne number
            </div>
          </div>
        </div>

        <div class="form-row">
          <label for="paymentMethod">Maksmisviis</label>
          <select
            id="paymentMethod"
            formControlName="paymentMethod"
            [class.is-invalid]="participantForm.get('paymentMethod')?.invalid && participantForm.get('paymentMethod')?.touched"
          >
            <option [ngValue]="null"></option>
            <option value="CARD">Kaart</option>
            <option value="BANK_TRANSFER">Pangaülekanne</option>
            <option value="CASH">Sularaha</option>
          </select>
          <div class="error-msg"
               *ngIf="participantForm.get('paymentMethod')?.invalid && participantForm.get('paymentMethod')?.touched">
            Maksmisviis on kohustuslik
          </div>
        </div>

        <div class="form-row">
          <label for="additionalInfo">Lisainfo:</label>
          <textarea
            id="additionalInfo"
            formControlName="additionalInfo"
          ></textarea>
        </div>

        <div class="form-actions">
          <a (click)="goBack()" class="btn-grey">Tagasi</a>
          <button type="submit" class="btn-blue">Salvesta</button>
        </div>
      </form>
    </div>
  </div>
</div>
